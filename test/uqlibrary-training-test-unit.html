<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>uqlibrary-training</title>

    <script src="../../webcomponentsjs/webcomponents.min.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
    <script src="../../test-fixture/test-fixture-mocha.js"></script>
    <script src="../../moment/min/moment.min.js"></script>
    <link rel="import" href="../../test-fixture/test-fixture.html">

    <!-- Import the element to test -->
    <link rel="import" href="../elements/uqlibrary-training.html">

</head>
<body>

<test-fixture id="basic">
    <template>
        <uqlibrary-training auto-load="false"></uqlibrary-training>
    </template>
</test-fixture>

<script>
    var training = [
        {
            "entityId": 464165,
            "created": "2016-07-08T16:33:16.6+10:00",
            "updated": "2016-07-08T16:33:16.6+10:00",
            "name": "How to Write a Successful Resume and Cover Letter!",
            "start": "2016-07-15T12:00:00+10:00",
            "end": "2016-07-15T14:00:00+10:00",
            "publish": "2016-07-08T00:00:00+10:00",
            "expire": "2016-07-15T14:00:00+10:00",
            "summary": "Your resume/CV and cover letter create a first impression, so you want them to be noticed by employers. Is your application at the professional standard expected by recruiters for internships and grad programs?\r\nCome along to this session and find out How to write a strong Resume and Cover Letter!",
            "details": "<p>Your resume is your most important marketing tool. Learn how to market yourself effectively and get ahead of the crowd! </p><p>This 2 hour workshop will help you to prepare a professional resume and tailor your cover letter&nbsp;to reflect your skills, knowledge, education and achievements relevant to the job you are applying for.</p><p>This workshop will cover information on:</p><ol><li>Analysing a job ad&nbsp;&amp; understanding what an employer wants</li><li>What to include and how to format your&nbsp;resume</li><li>The importance of a Cover Letter</li><li>Cover letter Format and Content</li></ol><p>This workshop requires you to bring your current resume. It doesn't matter whether it is your high school resume or a more recent one for a casual job.</p><p>This workshop is accessible to all UQ Students and Alumni of up to 6 months. Bookings are not required but please make sure to arrive on time to secure your seat. If we have reached full capacity you will be directed to the next available workshop.</p><p>*During the first 8 weeks of Semester it is advised you arrive at least 15 prior to start time.&nbsp;</p>",
            "venue": "Student Services, level 2, Building 21C, Media Room 215\r\n2 hours",
            "bookingType": 0,
            "bookingSettings": null,
            "workGroupId": null,
            "providers": {
                "organisations": [],
                "administrators": [
                    {
                        "id": 118568,
                        "firstName": "Nicky",
                        "lastName": "Spijkerman",
                        "email": "n.spijkerman@uq.edu.au"
                    }
                ]
            },
            "attendance": {
                "total": 0,
                "unspecified": 0,
                "absent": 0,
                "attended": 0
            },
            "categories": {
                "eventType": "Career and Job Assistance",
                "campus": [
                    "St Lucia"
                ]
            }
        },
        {
            "entityId": 464166,
            "created": "2016-07-08T16:37:44.5+10:00",
            "updated": "2016-07-08T16:37:44.5+10:00",
            "name": " Interview Excellence: The steps to interview success",
            "start": "2016-07-19T12:00:00+10:00",
            "end": "2016-07-19T14:00:00+10:00",
            "publish": "2016-07-08T00:00:00+10:00",
            "expire": "2016-07-19T14:00:00+10:00",
            "summary": "Want to improve you interview skills? The workshop provides valuable information to help you nail your next interview and gives solid guidance on how to best prepare. Gain an insight into employer expectations while developing confidence in your unique skills and achievements.",
            "details": "<p>You have landed an interview and now the only thing between you and the job is how you sell yourself on the day!</p><p>This workshop will teach you how to prepare and present yourself at interview and increase your chances of securing the job.</p><p>This workshop will cover information on:</p><ul>\r\n<li>Researching for the role and how to better prepare yourself</li><li>General and behavioural interview questions/responses</li><li>How to handle the curly questions</li><li>Selling your skills and attributes to leave a positive lasting impression</li></ul>",
            "venue": "Media Room 215\r\nStudent Union Complex, Bld 21C (directly under the Pizza Cafe)",
            "bookingType": 0,
            "bookingSettings": null,
            "workGroupId": null,
            "providers": {
                "organisations": [],
                "administrators": [
                    {
                        "id": 198164,
                        "firstName": "Lawrence",
                        "lastName": "Casey",
                        "email": "l.casey2@uq.edu.au"
                    }
                ]
            },
            "attendance": {
                "total": 0,
                "unspecified": 0,
                "absent": 0,
                "attended": 0
            },
            "categories": {
                "eventType": "Career and Job Assistance",
                "campus": [
                    "St Lucia"
                ]
            }
        }
    ];

    suite('<uqlibrary-training> tests', function () {
        var element;

        setup(function () {
            element = fixture('basic');
        });


        test('It should load data', function (done) {
            element.addEventListener('uqlibrary-training-loaded', function() {
                var _items = element.$.list.$.list.items;

                expect(_items.length).to.be.equal(element.events.length);
                expect(_items.length).to.be.equal(training.length);

                expect(_items[0].title).to.be.equal(training[0].title);
                expect(_items[1].startTime).to.be.equal(moment(training[1].start).format("h:mma"));

                done();
            });

            element.events = training;
        });

        test('It should allow a user to navigate through the application', function (done) {
            element.addEventListener('uqlibrary-training-loaded', function() {
                expect(element._selectedPage).to.be.equal(0);

                setTimeout(function () {
                    // Click first list item
                    element.$.list.$$('paper-item.item').click();

                    setTimeout(function () {
                        expect(element._selectedPage).to.be.equal(1);

                        element.$.details.$$('.close paper-icon-button').click();

                        setTimeout(function () {
                            expect(element._selectedPage).to.be.equal(0);
                            done();
                        }, 100);
                    }, 100);
                }, 100);
            });
            element.events = training;
        });

        test('It should show a details view', function (done) {
            element.addEventListener('uqlibrary-training-loaded', function() {
                setTimeout(function () {
                    // Click first list item
                    element.$.list.$$('paper-item.item').click();

                    setTimeout(function () {
                        expect(element.$.details.event.name).to.be.equal(training[0].name);
                        expect(element.$.details._fullDate).to.be.equal(moment(training[0].start).format("dddd, MMMM DD YYYY"))
                        done();
                    }, 100);
                }, 100);
            });
            element.events = training;
        });
    });
</script>

</body>
</html>
