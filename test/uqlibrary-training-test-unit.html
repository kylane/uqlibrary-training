<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>uqlibrary-training</title>

    <script src="../../webcomponentsjs/webcomponents.min.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
    <script src="../../test-fixture/test-fixture-mocha.js"></script>
    <script src="../../moment/min/moment.min.js"></script>
    <link rel="import" href="../../test-fixture/test-fixture.html">

    <!-- Import the element to test -->
    <link rel="import" href="../elements/uqlibrary-training.html">

</head>
<body>

<test-fixture id="basic">
    <template>
        <uqlibrary-training auto-load="false"></uqlibrary-training>
    </template>
</test-fixture>

<script>
    var training = [
        {
            "id": 439800,
            "title": "TEST - do not book:Databases for Engineering Honours ",
            "summary": "Learn about the databases you should be using for research",
            "details": "<p>test research session for honours</p>",
            "venue": "St Lucia, \r\n\r\nDorothy Hill Engineering & Sciences Library, \r\n\r\nHawken Bldg (50), \r\n\r\neZone , Level 2",
            "startUtc": "2016-07-12T11:00:00+10:00",
            "endUtc": "2016-07-12T12:00:00+10:00",
            "start": "2016-07-12T21:00:00+10:00",
            "end": "2016-07-12T22:00:00+10:00",
            "email": "",
            "phone": ""
        },
        {
            "id": 442519,
            "title": "UQ 2016 Student Summit - Think Tank Session",
            "summary": "This interactive workshop will help you to prepare for the Summit, by working in groups to summarise the key issues for discussion at the event.\r\n\r\nThis event is only available to successful candidates for the UQ 2016 Student Summit program.",
            "details": "<p>This interactive workshop will help you to prepare for the Summit, by working in groups to summarise the key issues for discussion at the event.</p><p>This event is only available to successful candidates for the UQ 2016 Student Summit program.</p>",
            "venue": "Room 273- Global Change Institute Building # 20",
            "startUtc": "2016-07-21T08:30:00+10:00",
            "endUtc": "2016-07-21T10:30:00+10:00",
            "start": "2016-07-21T18:30:00+10:00",
            "end": "2016-07-21T20:30:00+10:00",
            "email": "b.brear@uq.edu.au",
            "phone": ""
        }
    ];

    suite('<uqlibrary-training> tests', function () {
        var element;

        setup(function () {
            element = fixture('basic');
        });


        test('It should load data', function (done) {
            element.addEventListener('uqlibrary-training-loaded', function(){
                var _items = element.$.list.items;

                expect(_items.length).to.be.equal(element.links.length);
                expect(_items.length).to.be.equal(training.length);

                expect(_items[0].title).to.be.equal(training[0].title);
                expect(_items[1].startTime).to.be.equal(moment(training[1].start).format("h:mma"));

                done();
            });

            element.setTrainingLinks(training);
        });
    });
</script>

</body>
</html>
