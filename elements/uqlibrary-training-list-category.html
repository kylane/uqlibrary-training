<link rel="import" href="elements.html">

<!--
`<uqlibrary-training-list>` is a simple element that displays a list of training events

Example:

    <uqlibrary-training-list events="{{events}}"></uqlibrary-training>

@demo

@demo demo/index.html Demo of the Full view
-->
<dom-module id="uqlibrary-training-list-category">

  <style is="custom-style" include="common-styles">

    :host {
      font-family: var(--font-family);
      font-size: var(--body-font-size);

      display: block;
      position: relative;
      box-sizing: border-box;

    }

    .card-active {
      background: var(--menu-hover-background-color);
    }
    paper-card {
      width: 100%;
    }

    paper-item {

      --paper-item: {
        border-bottom: 1px solid var(--border-color);
      }

      --paper-item-focused: {
        background: var(--menu-hover-background-color);
      }

      --paper-item-focused-before: {
        opacity: 0;
      }

    }

    .event-date {
      min-width: 140px;
      cursor: default;
    }

    a {
      cursor: default;
    }

  </style>

  <template>

    <uqlibrary-ga id="ga" app-name="[[gaAppName]]"></uqlibrary-ga>

    <paper-card heading="[[category.displayName]]">

      <template is="dom-repeat"
                items="[[category.events]]"
                as="trainingEvent"
                filter="{{filterEvents(filterCriteria.keyword, filterCriteria.month, filterCriteria.campus)}}"
                rendered-item-count="{{renderedCount}}">

        <paper-item on-click="toggle">
          <div class="event-date">[[_formatDate(trainingEvent.start)]]</div>
          <div class="event-link flex"><a>[[trainingEvent.name]] ([[ trainingEvent.categories.campus ]])</a></div>
          <div class="event-show-indicator">
            <iron-icon class="down" icon="icons:arrow-drop-down"></iron-icon>
          </div>
          <paper-ripple></paper-ripple>
        </paper-item>

        <iron-collapse id$="collapse[[trainingEvent.entityId]]">
          <div class="card-active">
            <div class="card-content">
              <paper-card>
                <uqlibrary-training-details event="[[trainingEvent]]" show-login-button="true">
                </uqlibrary-training-details>
              </paper-card>
            </div>
          </div>
        </iron-collapse>
      </template>


      <template is="dom-if" if="{{!renderedCount}}">
        <div class="card-content">
        No events available
        </div>
      </template>

    </paper-card>

  </template>

  <script src="uqlibrary-training-list-category.js"></script>

</dom-module>
