<link rel="import" href="elements.html">

<!--
`<uqlibrary-training>` is a simple element that displays the opening hours for each of the libraries

Example:

    <uqlibrary-training auto-load="true"></uqlibrary-training>

@demo

@demo demo/index.html Demo of the Full view
-->
<dom-module id="uqlibrary-training">

    <style is="custom-style" include="common-styles">
        :host {
            font-family: var(--font-family);
            font-size: var(--body-font-size);
        }

        paper-item.item {
            border-bottom: 1px solid var(--border-color);
            padding: 0;
            cursor: pointer;
        }

        paper-item.no-classes span {
            text-align: center;
            @apply(--layout-flex);
        }

        paper-item-body {
            padding-left: 20px;
        }

        paper-item-body .secondary {
            color: var(--secondary-color);
            font-size: 12px;
        }

        .date {
            text-align: center;
            background-color: var(--accent-color-dark);
            color: #FFF;
            @apply(--layout-vertical);
            @apply(--layout-center-justified);
            @apply(--layout-self-stretch);
            flex: none;
            width: 80px;
            min-height: 80px;
        }

        .date.close {
            background-color: #00b300;
        }
    </style>

    <template>
        <uqlibrary-api-training id="trainingApi"></uqlibrary-api-training>
        <uqlibrary-ga id="ga" app-name="[[_gaAppName]]"></uqlibrary-ga>

        <paper-item class="header">Upcoming training</paper-item>

        <!-- Training API list -->
        <template id="list" is="dom-repeat" items="{{links}}">
            <!-- Single Item -->
            <paper-item
                class="item"
                on-click="_linkClicked"
                aria-label$="[[item.title]]"
                title$="[[item.title]]">
                <div class$="date [[_dateClass(item)]]">
                    <span class="body1 inverse">[[item.startDayWeek]]</span>
                    <span class="headline inverse">[[ item.startDay ]]</span>
                    <span class="body1 inverse">[[ item.startMonth ]]</span>
                </div>
                <paper-item-body two-line>
                    <div class="caption">[[item.title]]</div>
                    <div class="secondary" secondary>[[item.startTime]], [[item.location]] (Log in to book)</div>
                </paper-item-body>
            </paper-item>
        </template>

        <!-- Backup list in case no result are found in the API -->
        <template is="dom-if" if="[[_showBackupLinks]]">
            <paper-item class="item body1 no-classes">
                <span>No classes scheduled, check back soon.</span>
            </paper-item>
            <!-- Category Repeat -->
            <template id="backuplist" is="dom-repeat" items="{{_backupLinks()}}">
                <!-- Single Category -->
                <div class="category-container">
                    <paper-item
                        class$="header {{ _itemClass(item) }}"
                        role$="{{_itemRole(item)}}"
                        aria-label$="{{item.name}}"
                        title$="{{item.name}}"
                        on-click="_linkClicked">
                        {{ item.name }}
                        <paper-ripple></paper-ripple>
                    </paper-item>

                    <div class="item-container">
                        <!-- Sub item repeat -->
                        <template is="dom-repeat" items="{{item.items}}" as="sub">
                            <!-- Single Item -->
                            <paper-item
                                class$="compact detail-item {{ _itemClass(sub) }}"
                                role$="{{_itemRole(sub)}}"
                                aria-label$="{{sub.name}}"
                                title$="{{sub.name}}"
                                on-click="_linkClicked">
                                <div class="bullet"></div>
                                <div class="linked-item item-name body1">
                                    {{sub.name}}
                                </div>
                                <paper-ripple></paper-ripple>
                            </paper-item>
                        </template>
                    </div>
                </div>
            </template>
        </template>
    </template>
    <script src="uqlibrary-training.js"></script>
</dom-module>
